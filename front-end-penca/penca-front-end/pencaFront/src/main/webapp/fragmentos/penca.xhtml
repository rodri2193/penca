<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" 
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:o="http://omnifaces.org/ui">
    
    <h:head>
        <title>Greeting</title>
    </h:head>
    <h:body>
        <p:layout fullPage="true">

                <p:layoutUnit position="north" size="100" resizable="true" closable="true" collapsible="true">
                    Usuario: #{usuarioBean.usuarioEnEdicion.codigo}
                </p:layoutUnit>

                <p:layoutUnit position="south" size="100" closable="true" collapsible="true">
                    Footer
                </p:layoutUnit>
        
        <c:set var="soloLecturaPersona" value="#{soloLecturaPersona}" scope="request"/>
        <h:form id="form">
        <p:dataTable var="partido" value="#{pencaBean.campeonatoEnEdicion.partidos}" >
                        <p:column headerText="Cuadro1">
                            <h:outputText value="#{partido.cuadro1}" />
                        </p:column>
                        <p:column headerText="Cuadro2">
                            <h:outputText value="#{partido.cuadro2}" />
                        </p:column>
                        <p:column headerText="Fecha">
                            <h:outputText value="#{partido.fecha}" />
                        </p:column>
                        <p:column headerText="Resultado">
                            <h:outputText value="#{pencaBean.verResultadoPartido(partido.partido_pk)}" />
                        </p:column>
                        <p:column >
                            <p:commandButton update=":form:popupPartido"  value="apostar" oncomplete="PF('itemDialog').show()" action="#{pencaBean.generarApuesta(partido)}"  />
                        </p:column>
                </p:dataTable>
        
        <p:dialog id="popupPartido" header="Apuesta" widgetVar="itemDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">             
            <p:outputPanel id="itemDetail">                                                             
                <h:panelGroup rendered="#{not empty pencaBean.apuestaEnEdicion}" >                                 
                         <p:outputPanel id="fila_input_cuadro1" >                        
                             #{pencaBean.partidoEnEdicion.cuadro1}                   
                            <p:outputPanel styleClass="col-sm-9">                            
                                <h:inputText autocomplete="off" id="input_resCuadro1"  value="#{pencaBean.apuestaEnEdicion.res1}"/>                        
                            </p:outputPanel>                    
                        </p:outputPanel>
                        <p:outputPanel id="fila_input_cuadro2" >                        
                             #{pencaBean.partidoEnEdicion.cuadro2}                      
                            <p:outputPanel styleClass="col-sm-9">                            
                                <h:inputText autocomplete="off" id="input_resCuadro2" value="#{pencaBean.apuestaEnEdicion.res2}"/>                        
                            </p:outputPanel>                    
                        </p:outputPanel>
                        <p:outputPanel styleClass="control-group" >
                            <p:outputPanel styleClass="float-right">
                                <p:commandButton id="btnGuardar"  value="Guardar" update="@form"  action="#{pencaBean.guardarApuesta()}"                                                  
                                                  icon="glyphicon glyphicon-floppy-disk"/>                             
                                <p:commandLink value="#{msg.cancelar}" oncomplete="PF('itemDialog').hide();"  update="@form" styleClass="btn btn-link"/>                        
                            </p:outputPanel>                    
                        </p:outputPanel>                     
                        <p:blockUI block="@form" trigger="btnGuardar" />   
                          
                </h:panelGroup>            
            </p:outputPanel>        
        </p:dialog> 
       </h:form> 
        </p:layout>
    </h:body>
</html>

